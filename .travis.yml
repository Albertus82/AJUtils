language: java

branches:
  except:
  - mvn-repo

matrix:
  include:
    - os: linux
      jdk: oraclejdk8
      addons:
        sonarcloud:
          organization: "albertus82-github"
      env:
        - secure: "Kf/FmAkFyIGcGhXuI6ByfRUg3Uhyj/Dr2+3Bc4croxLIQ/xYMEepN21+OBer0l2ERJNlJaK6GrBTkFArPQ7mhnqwiNcBNR0+B96UxWGcr+mrtW2BjVsaiafaEJByw44i+JV3Wy/EbGQZ8N3cW09C2vU75s6klS92lC2AYOFXrrBgoZBtrLB470z7lLK+RyvSbcDQDqdPhGI518O0XbH7Fv/QEk61yUlg+TgnJmPbLxXqpmMpQu2Toot25FjENpq8w2+zuF3CEmvq+0qmscyzuWytRkF06NbatPGnlVASyAuHQ+VwO8NzgBV44/Ja1TuUwE4Hvy73FBiy0VKStkgBbWomv0KmrqoV8tABLJjIbztm2qn/k131oCpiSuR73usMeg3G9/cRxKBT1gsbVjWpgbHwgCIytYlo7oHv7fsThutuBCMMqfczyPh8WEHY6SHxc/68rktQc6cRHhtap5yr9+7Nm9KAOiInIwYJ18V+J0ZwnzhAJJ8CxweFWZIK4dK//8kV7RqE3tlqOjnNDlBmWxbzU0ykG19VaeRnuGQtVRu+lthOBs+tIjfm8NCg+qe7VJgqdV1N1BqDZyE+/CMocTR+kn9FRaI3D5TDJxgyB4BKgV7i//anJm+142GQkq2Ly1qe3YecNtuHWngEEUyEwaXs036dN7DJ9vDRkU8M0cg="
        - secure: "axASpDHSiV97Okwj3+Lx2lVEwSWNEYGiVhRMjwvlefSGAFWuu4G+SMiF1W4Fziz6nYe/Z5GwHAsGcpmm0xGl7QnBOmncIgL5bPsb2o0gqG2nr6Yae9H789z36K7Fig5+C0hezbGY1AKGID6cwK9ptzPE0NtANU3Aalkz/1xzzWjXipTDa71tCh+clmBkJgRYgBW5A2iBFrmOt9lufMSgubuXE6Fzvs3ZxglEyvN3stEpubQJ6G2cKwEkxr5Ip9ynPgu2R/LXdUyudu/Ihu3rvOuF3zvHsZU86MOZW/zaMi9aVTB8oMB6PL5USOa0SZDmfYGJTUo46FrUwO8U9R8SZH7hqji74Zi8bog/8QBdBzDqTOygBeZ41m0O6gecjt/28yb04x9ReRidXOIRqpMPn9ptW17yj6CSA6FOKoBV0pHV3eitmvfXO/f+a5Nz8CJYQbK1mQyMZ49x9NFOoCv7jtf+i/sRU+RhXsZG98XXHPrbl87VC7wjjpGgNFgIDqkpkHj7UtjV15izLpHaVC+CldkccmgrnUCJ3r8Nlevlta2p3ESxlzHhrIX/Ki/qwehUFarJTYYzFS/pbyclNM8Pou5MTRPyfxZMRRmgxYTsuxLeXowCZasPLF1x+FBNkCXvzUbRsD1Oq6+AxMqHbgkPzIQMJiDZTYGcWmS6sC17/DY="
      script: 
        - mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar
      after_success:
        - mvn deploy
    - os: linux
      jdk: openjdk7
    - os: linux
      jdk: openjdk6
      addons:
        apt:
          packages:
            - openjdk-6-jdk
      before_install:
        - wget https://archive.apache.org/dist/maven/maven-3/3.2.5/binaries/apache-maven-3.2.5-bin.zip
        - unzip -qq apache-maven-3.2.5-bin.zip
        - rm apache-maven-3.2.5-bin.zip
        - export M2_HOME=$PWD/apache-maven-3.2.5
        - export PATH=$M2_HOME/bin:$PATH
    - os: osx

script:
  - mvn install
